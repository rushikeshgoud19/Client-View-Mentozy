import{a as S,r as m,j as e,L as C,A as E,g as P,t as k}from"./index-DZqTk1Xt.js";import{C as R}from"./chevron-down-CJHlAUJq.js";import{C as D}from"./circle-check-DYJKQIFk.js";function B(){const d=S(),[r,n]=m.useState(1),[x,u]=m.useState(!1),[a,p]=m.useState({fullName:"",designation:"",email:"",phone:"",subjects:[],strengths:"",experience:"",hourlyRate:30}),[t,h]=m.useState({}),i=(s,l)=>{p(o=>({...o,[s]:l})),t[s]&&h(o=>({...o,[s]:""}))},b=s=>{const l=a.subjects;l.includes(s)?i("subjects",l.filter(o=>o!==s)):i("subjects",[...l,s])},f=()=>{const s={};if(r===1&&(a.fullName||(s.fullName="Full Name is required"),a.designation||(s.designation="Please select your designation")),r===2&&((!a.email||!/^\S+@\S+\.\S+$/.test(a.email))&&(s.email="Valid Email is required"),a.phone||(s.phone="Phone number is required")),r===3&&a.subjects.length===0&&(s.subjects="Select at least one subject"),Object.keys(s).length>0){h(s);return}r<5?n(l=>l+1):y()},y=async()=>{u(!0);try{const s=P();if(!s)throw new Error("Supabase not initialized");let{data:l,error:o}=await s.auth.signUp({email:a.email,password:"Password123!"});if(o)throw o.message.includes("already registered")?new Error("User already registered. Please login."):o;if(!l.user)throw new Error("No user created");await s.from("profiles").upsert({id:l.user.id,full_name:a.fullName,role:"mentor",phone:a.phone});const{data:N,error:g}=await s.from("mentors").upsert({user_id:l.user.id,bio:a.designation,years_experience:0,hourly_rate:a.hourlyRate,rating:5,total_reviews:0},{onConflict:"user_id"}).select().single();if(g)throw g;const v=a.subjects.map(w=>({mentor_id:N.id,skill:w}));await s.from("mentor_expertise").upsert(v,{onConflict:"mentor_id,skill"}),d("/teacher-success?status=active")}catch(s){console.error("Signup Error:",s),k.error(s.message||"Failed to create account")}finally{u(!1)}},j=["Mathematics","Physics","Chemistry","Computer Science","English","History","Business Studies","Design","Economics","Biology"];return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col font-sans",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl font-bold tracking-tight text-gray-900",children:"Mentozy"}),e.jsx("div",{className:"w-1.5 h-1.5 bg-amber-500 rounded-sm"})]}),e.jsxs("div",{className:"text-sm font-medium text-gray-500",children:["Step ",r," of 5"]})]})}),e.jsx("div",{className:"flex-grow flex justify-center p-6",children:e.jsxs("div",{className:"max-w-3xl w-full bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"w-full bg-gray-100 h-1",children:e.jsx("div",{className:"bg-amber-500 h-1 transition-all duration-300",style:{width:`${r/5*100}%`}})}),e.jsxs("div",{className:"p-8 md:p-12 flex-grow",children:[r===1&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4 fade-in duration-300",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tell us about yourself"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Full Name"}),e.jsx("input",{value:a.fullName,onChange:s=>i("fullName",s.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 outline-none",placeholder:"e.g. Dr. Sarah Smith"}),t.fullName&&e.jsx("p",{className:"text-xs text-red-500",children:t.fullName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Designation"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:a.designation,onChange:s=>i("designation",s.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 outline-none appearance-none bg-white",children:[e.jsx("option",{value:"",children:"Select your designation"}),e.jsx("option",{value:"Student",children:"Student (Peer Mentor)"}),e.jsx("option",{value:"Graduate",children:"Recent Graduate"}),e.jsx("option",{value:"Professional",children:"Working Professional"}),e.jsx("option",{value:"Certified",children:"Certified Mentor / Teacher"})]}),e.jsx(R,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),t.designation&&e.jsx("p",{className:"text-xs text-red-500",children:t.designation})]})]})]}),r===2&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4 fade-in duration-300",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"How can we reach you?"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email Address"}),e.jsx("input",{type:"email",value:a.email,onChange:s=>i("email",s.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 outline-none",placeholder:"email@example.com"}),t.email&&e.jsx("p",{className:"text-xs text-red-500",children:t.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Phone Number"}),e.jsx("input",{type:"tel",value:a.phone,onChange:s=>i("phone",s.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 outline-none",placeholder:"+1 234 567 8900"}),t.phone&&e.jsx("p",{className:"text-xs text-red-500",children:t.phone})]})]})]}),r===3&&e.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4 fade-in duration-300",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Teaching Expertise"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 block",children:"Subjects you teach"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(s=>e.jsx("button",{onClick:()=>b(s),className:`px-4 py-2 rounded-full text-sm font-medium border transition-colors ${a.subjects.includes(s)?"bg-amber-100 border-amber-300 text-amber-800":"bg-white border-gray-200 text-gray-600 hover:border-amber-200"}`,children:s},s))}),t.subjects&&e.jsx("p",{className:"text-xs text-red-500",children:t.subjects})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Areas of Strength"}),e.jsx("input",{value:a.strengths,onChange:s=>i("strengths",s.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 outline-none",placeholder:"e.g. Exam Prep, Career Guidance, Project Support"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Teaching Experience ",e.jsx("span",{className:"text-gray-400 font-normal",children:"(Optional)"})]}),e.jsx("textarea",{value:a.experience,onChange:s=>i("experience",s.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 outline-none min-h-[100px]",placeholder:"Briefly describe your experience..."})]})]}),r===4&&e.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4 fade-in duration-300",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Set your teaching price"}),e.jsx("p",{className:"text-gray-500",children:"You can update this later from your dashboard."})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl p-8 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"text-5xl font-bold text-amber-600 mb-2 flex items-start",children:[e.jsx("span",{className:"text-2xl mt-2 mr-1",children:"$"}),a.hourlyRate,e.jsx("span",{className:"text-lg text-gray-500 font-medium self-end mb-2 ml-1",children:"/ hr"})]}),e.jsx("input",{type:"range",min:"15",max:"75",step:"5",value:a.hourlyRate,onChange:s=>i("hourlyRate",Number(s.target.value)),className:"w-full max-w-md h-2 bg-amber-200 rounded-lg appearance-none cursor-pointer accent-amber-600 mt-6"}),e.jsxs("div",{className:"w-full max-w-md flex justify-between text-xs text-gray-500 mt-2 font-medium",children:[e.jsx("span",{children:"$15"}),e.jsx("span",{children:"$75"})]})]})]}),r===5&&e.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4 fade-in duration-300",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Review your profile"}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 space-y-4 border border-gray-100",children:[e.jsx(c,{label:"Name",value:a.fullName,onEdit:()=>n(1)}),e.jsx(c,{label:"Designation",value:a.designation,onEdit:()=>n(1)}),e.jsx(c,{label:"Email",value:a.email,onEdit:()=>n(2)}),e.jsx(c,{label:"Subjects",value:a.subjects.join(", "),onEdit:()=>n(3)}),e.jsx(c,{label:"Hourly Rate",value:`$${a.hourlyRate}/hr`,onEdit:()=>n(4)})]}),e.jsx("p",{className:"text-xs text-center text-gray-500",children:"By creating an account, you agree to our Terms of Service and Privacy Policy."})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 border-t border-gray-100 flex justify-between items-center",children:[e.jsx("button",{onClick:()=>r===1?d("/teacher-type"):n(s=>s-1),className:"px-6 py-2.5 rounded-xl font-semibold text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-colors",children:"Back"}),e.jsx("button",{onClick:f,disabled:x,className:"px-8 py-2.5 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-bold shadow-lg shadow-amber-500/20 hover:-translate-y-0.5 transition-all flex items-center gap-2 disabled:opacity-70",children:x?e.jsx(C,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[r===5?"Create Account":"Next",r===5?e.jsx(D,{className:"w-4 h-4"}):e.jsx(E,{className:"w-4 h-4"})]})})]})]})})]})}function c({label:d,value:r,onEdit:n}){return e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:d}),e.jsx("p",{className:"text-gray-900 font-medium",children:r})]}),e.jsx("button",{onClick:n,className:"text-xs font-bold text-amber-600 hover:underline",children:"Edit"})]})}export{B as IndividualOnboardingPage};
