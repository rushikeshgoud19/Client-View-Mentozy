import{c as h,a as j,r as c,j as e,L as v,A as w,g as E,t as O}from"./index-DZqTk1Xt.js";import{M as C}from"./map-pin-C2C1gFrk.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],k=h("cloud-upload",F);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],T=h("globe",S);function D(){const x=j(),[r,m]=c.useState(1),[u,f]=c.useState(!1),[i,p]=c.useState(null),[s,b]=c.useState({orgName:"",orgType:"",officialEmail:"",role:"",teachingDomain:"",website:"",founderName:"",address:""}),[l,g]=c.useState({}),t=(a,o)=>{b(n=>({...n,[a]:o})),l[a]&&g(n=>({...n,[a]:""}))},y=()=>{const a={};if(r===1&&(s.orgName||(a.orgName="Organisation Name is required")),r===2&&(s.orgType||(a.orgType="Please select an organisation type")),i==="online"){if(r===3){const d=/^[^\s@]+@[^\s@]+\.(com|in|edu)$/;(!s.officialEmail||!d.test(s.officialEmail))&&(a.officialEmail="Enter a valid official email (.com, .in, .edu)")}r===4&&(s.role||(a.role="Please select your role"))}if(i==="offline"&&r===4&&(s.founderName||(a.founderName="Founder Name is required"),s.officialEmail||(a.officialEmail="Email is required"),s.address||(a.address="Address is required")),Object.keys(a).length>0){g(a);return}if(r===2){p(s.orgType),m(3);return}i==="online"&&r===6||i==="offline"&&r===5?N():m(d=>d+1)},N=async()=>{f(!0);try{const a=E();if(!a)throw new Error("Supabase not initialized");let{data:o,error:n}=await a.auth.signUp({email:s.officialEmail,password:"Password123!"});if(n&&n.message.includes("already registered"))throw new Error("Account already exists for this email.");if(n)throw n;if(!o.user)throw new Error("No user created");await a.from("profiles").upsert({id:o.user.id,full_name:s.orgName,role:"mentor"});const d=i==="online"?"active":"pending";await a.from("mentors").upsert({user_id:o.user.id,company:s.orgName,bio:JSON.stringify({type:i,role:s.role,website:s.website,domain:s.teachingDomain,address:s.address,founder:s.founderName}),rating:0},{onConflict:"user_id"}),x(`/teacher-success?status=${d}`)}catch(a){console.error(a),O.error(a.message||"Failed")}finally{f(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col font-sans",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsx("div",{className:"max-w-3xl mx-auto flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl font-bold tracking-tight text-gray-900",children:"Mentozy Org"}),e.jsx("div",{className:"h-4 w-[1px] bg-gray-300"}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Partner Onboarding"})]})})}),e.jsx("div",{className:"flex-grow flex justify-center p-6",children:e.jsxs("div",{className:"max-w-3xl w-full bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-8 md:p-12 flex-grow",children:[r===1&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4 fade-in duration-300",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tell us about your organisation"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Organisation Name"}),e.jsx("input",{value:s.orgName,onChange:a=>t("orgName",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none",placeholder:"e.g. Springfield Academy"}),l.orgName&&e.jsx("p",{className:"text-xs text-red-500",children:l.orgName})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-8 flex flex-col items-center justify-center text-gray-400 hover:border-blue-300 hover:bg-blue-50 transition-colors cursor-pointer",children:[e.jsx(k,{className:"w-8 h-8 mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Upload Organisation Logo"})]})]})]}),r===2&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4 fade-in duration-300",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"What type of organisation are you?"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("button",{onClick:()=>t("orgType","online"),className:`p-6 rounded-xl border-2 text-left transition-all flex items-center gap-4 ${s.orgType==="online"?"border-blue-500 bg-blue-50 ring-1 ring-blue-500":"border-gray-100 hover:border-blue-200"}`,children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-600",children:e.jsx(T,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Online Institute / New Institute"}),e.jsx("p",{className:"text-sm text-gray-500",children:"For digital-first academies and coaching centers."})]})]}),e.jsxs("button",{onClick:()=>t("orgType","offline"),className:`p-6 rounded-xl border-2 text-left transition-all flex items-center gap-4 ${s.orgType==="offline"?"border-blue-500 bg-blue-50 ring-1 ring-blue-500":"border-gray-100 hover:border-blue-200"}`,children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center text-gray-600",children:e.jsx(C,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Offline Public Campus"}),e.jsx("p",{className:"text-sm text-gray-500",children:"For physical schools, universities, and campuses."})]})]})]}),l.orgType&&e.jsx("p",{className:"text-xs text-red-500",children:l.orgType})]}),i==="online"&&r===3&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4 fade-in duration-300",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Organisation verification"}),e.jsx("div",{className:"p-4 bg-blue-50 text-blue-800 rounded-lg text-sm border border-blue-100",children:"Please use an official organisation email (e.g. admin@academy.com). Generic emails like gmail.com are not accepted."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Official Email Address"}),e.jsx("input",{type:"email",value:s.officialEmail,onChange:a=>t("officialEmail",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none",placeholder:"admin@myinstitute.com"}),l.officialEmail&&e.jsx("p",{className:"text-xs text-red-500",children:l.officialEmail})]})]}),i==="online"&&r===4&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4 fade-in duration-300",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your role"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Role in Organisation"}),e.jsxs("select",{value:s.role,onChange:a=>t("role",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none bg-white",children:[e.jsx("option",{value:"",children:"Select Role"}),e.jsx("option",{value:"Founder",children:"Founder"}),e.jsx("option",{value:"Admin",children:"Administrator"}),e.jsx("option",{value:"Manager",children:"Manager"}),e.jsx("option",{value:"Instructor",children:"Head Instructor"})]}),l.role&&e.jsx("p",{className:"text-xs text-red-500",children:l.role})]})]}),i==="online"&&r===5&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4 fade-in duration-300",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Organisation Profile"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"What does your organisation teach?"}),e.jsx("input",{value:s.teachingDomain,onChange:a=>t("teachingDomain",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none",placeholder:"e.g. Coding, Business, Design"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Website ",e.jsx("span",{className:"text-gray-400 font-normal",children:"(Optional)"})]}),e.jsx("input",{value:s.website,onChange:a=>t("website",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none",placeholder:"https://"})]})]})]}),i==="online"&&r===6&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4 fade-in duration-300",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Review & Join"}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 space-y-3",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Org Name:"})," ",s.orgName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",s.officialEmail]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Role:"})," ",s.role]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Creating your account will grant you immediate access to the Partner Dashboard."})]}),i==="offline"&&r===3&&e.jsx("div",{className:"space-y-6 animate-in slide-in-from-right-4 fade-in duration-300",children:e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6 text-center",children:[e.jsx("h3",{className:"text-lg font-bold text-amber-800 mb-2",children:"Application Required"}),e.jsx("p",{className:"text-amber-700",children:"Public offline campuses require manual verification before onboarding on Mentozy. You will need to submit an application with supporting documents."})]})}),i==="offline"&&r===4&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4 fade-in duration-300",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Application Form"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Founder / Head of Institution"}),e.jsx("input",{value:s.founderName,onChange:a=>t("founderName",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 outline-none"}),l.founderName&&e.jsx("p",{className:"text-xs text-red-500",children:l.founderName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Official Email"}),e.jsx("input",{type:"email",value:s.officialEmail,onChange:a=>t("officialEmail",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 outline-none"}),l.officialEmail&&e.jsx("p",{className:"text-xs text-red-500",children:l.officialEmail})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Address"}),e.jsx("textarea",{value:s.address,onChange:a=>t("address",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 outline-none"}),l.address&&e.jsx("p",{className:"text-xs text-red-500",children:l.address})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-xl p-6 text-center cursor-pointer hover:bg-gray-50",children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Upload Registration / Legal Documents"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PDF, JPG up to 10MB"})]})]})]}),i==="offline"&&r===5&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4 fade-in duration-300",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Confirm Submission"}),e.jsxs("p",{className:"text-gray-600",children:["Your application for ",e.jsx("strong",{children:s.orgName})," is ready to submit. Our team will review your documents and contact you at ",e.jsx("strong",{children:s.officialEmail}),"."]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 border-t border-gray-100 flex justify-between items-center",children:[e.jsx("button",{onClick:()=>r===1?x("/teacher-type"):m(a=>a-1),className:"px-6 py-2.5 rounded-xl font-semibold text-gray-600 hover:text-gray-900 hover:bg-gray-200 transition-colors",children:"Back"}),e.jsx("button",{onClick:y,disabled:u,className:"px-8 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold shadow-lg shadow-blue-500/20 hover:-translate-y-0.5 transition-all flex items-center gap-2",children:u?e.jsx(v,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[i==="offline"&&r===5||i==="online"&&r===6?"Submit":"Next",e.jsx(w,{className:"w-4 h-4"})]})})]})]})})]})}export{D as OrganisationTeacherOnboardingPage};
